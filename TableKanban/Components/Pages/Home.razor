@page "/"
@inject NavigationManager NavigationManager
@inject IStolbService StolbService
@inject ICardService CardService
@inject ITableService TableService
@inject TableDbContext db
@rendermode InteractiveServer

<h1>Выбери таблицу или создай новую</h1>

<main>
    <h2>Список таблиц</h2>

    @if (tables == null)
    {
    <p>У тебя пока нет таблиц, создай новую</p>
    }
    else
    {
        <div class="table-responsive">
            <table class="table">

            @foreach (var table in tables)
            {
                <tr>
                    <td>
                        <button type="button" class="btn btn-li" @onclick="() => OpenTableById(table.TableId)">@table.TableName</button>
                    </td>
                    <td>
                        <button type="button" class="btn btn-primary" @onclick="() => OpenEditTableById(table.TableId)">Редактировать</button>
                    </td>
                    <td>
                            <button type="button" class="btn btn-secondary" @onclick="() => DeleteTableById(table.TableId)">Удалить</button>
                            @if (tableErrorMessages.ContainsKey(table.TableId))
                            {
                                <div class="validation-message alert alert-danger">@tableErrorMessages[table.TableId]</div>
                            }
                    </td>
                </tr>
            }
            </table>
        </div>
    }

    <div>
        <button type="button" class="btn btn-primary" @onclick="AddNewTable">Создать таблицу</button>
    </div>
</main>
